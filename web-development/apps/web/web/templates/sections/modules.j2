{% import 'components/section.j2' as section %}

{% macro theme_list(heading, is_ordered = false) %}
    <div>
        <span
            class="text-white font-regular text-base mb-3"
        >
            {{ heading }}:
        </span>

        {% if is_ordered %}
            <ol>
                {{ caller() }}
            </ol>
        {% else %}
            <ul>
                {{ caller() }}
            </ul>
        {% endif %}
    </div>
{% endmacro %}

{% macro theme_materials_list(materials) %}
    {% call theme_list('дополнительные материалы') %}
        {% for material in materials %}
            <li>
                <a
                    href="{{material['href']}}"
                    target="_blank"
                    class="text-white font-regular text-base underline"
                >
                    {{ material['label'] }}
                </a>
            </li>
        {% endfor %}
    {% endcall %}
{% endmacro %}

{% macro theme_skills_list(skills) %}
    {% call theme_list('чему научится') %}
        {% for skill in skills %}
            <li
                class="text-white font-regular text-base"
            >
                {{ skill }}
            </li>
        {% endfor %}
    {% endcall %}
{% endmacro %}

{% macro theme(name, image, skills, materials) %}
    <article
        class="rounded-3xl overflow-hidden relative z-0"
    >
        <img
            class="object-cover min-h-full w-1/2 absolute left-0 top-0 z-10"
            src={{image}}
            alt={{name}}
        >

        <div
            class="grid grid-cols-5 p-6 bg-gradient-to-r from-transparent via-light-black to-green z-20 relative"
        >
            <div
                class="col-start-3 col-end-6"
            >
                <h3
                    class="text-white mb-4 font-headings text-3xl"
                >
                    {{ name }}
                </h3>

                <div
                    class="grid grid-cols-2"
                >
                    {{ theme_skills_list(skills) }}
                    {{ theme_materials_list(materials) }}
                </div>
            </div>
        </div>
    </article>
{% endmacro %}


{% call section.section('Образовательные модули') %}
    <div>
        <h3
            class="mb-4 text-black font-regular text-3xl"
        >
            Модуль 1
        </h3>
        <ul
            class="flex flex-col gap-2"
        >
            <li>
                {{ theme(
                    'Тема 1',
                    'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT4swcYshaYiLmiCWkOp4RWihWzsZgLjVoS7tslRYWA&s',
                    [
                        'навык 1',
                        'навык 2',
                        'навык 3',
                    ],
                    [
                        { 'label': 'материал 1', 'href': 'lorem' },
                        { 'label': 'материал 2', 'href': 'lorem' },
                        { 'label': 'материал 3', 'href': 'lorem' },
                    ]
                ) }}
            </li>
            <li>
                {{ theme(
                    'Тема 1',
                    'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT4swcYshaYiLmiCWkOp4RWihWzsZgLjVoS7tslRYWA&s',
                    [
                        'навык 1',
                        'навык 2',
                        'навык 3',
                    ],
                    [
                        { 'label': 'материал 1', 'href': 'lorem' },
                        { 'label': 'материал 2', 'href': 'lorem' },
                        { 'label': 'материал 3', 'href': 'lorem' },
                    ]
                ) }}
            </li>
        </ul>
    </div>
{% endcall %}
